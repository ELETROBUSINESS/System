<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-9060080612658200">

    <link rel="icon" href="/assets/img/iconWeb.png">
    <title>Gerenciador | Ryan</title>

    <!-- Link To CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script>
  document.addEventListener("DOMContentLoaded", () => {
    const auth = JSON.parse(localStorage.getItem("auth"));

    if (!auth) {
      window.location.href = "/login.html";
      return;
    }

    const currentPath = window.location.pathname;

    // CNPJ tem acesso a tudo
    if (auth.username === "45692327000100") return;

    // Garante que o usuário só acesse a própria pasta
    if (!currentPath.includes("/" + auth.username + "/")) {
      alert("Acesso negado. Você não tem permissão para acessar esta página.");
      window.location.href = "/login.html";
    }
  });
</script>

</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BV6V3GTMR0"></script>
<script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-BV6V3GTMR0'); </script>

<body class="painel-adm1" onload="constDate();">
    <div class="mensagerLocal">
        <div class="mensager">
            <img src="/assets/eFriend.png">
            <div>
                <h1>Bom dia <span>Ryan</span>,</h1>
                <p>Tenha um ótimo dia de vendas colega!</p>
            </div>
            <div class="progress-bar"></div> <!-- Barra adicionada aqui -->
        </div>
    </div>
    <script>
        const MENSAGEM_KEY = 'ultimaMensagemEletro';
        const INTERVALO_HORAS = 20;
        const INTERVALO_MS = INTERVALO_HORAS * 60 * 60 * 1000;

        const agora = new Date().getTime();
        const ultimaVisualizacao = localStorage.getItem(MENSAGEM_KEY);

        const mensagemEl = document.querySelector('.mensagerLocal');

        // Se nunca viu ou já passou 20 horas
        if (!ultimaVisualizacao || (agora - parseInt(ultimaVisualizacao)) > INTERVALO_MS) {
            mensagemEl.style.display = 'flex';

            // Começa animação de desaparecimento após 10s
            setTimeout(() => {
                mensagemEl.style.transition = "opacity 0.5s ease";
                mensagemEl.style.opacity = 0;

                setTimeout(() => {
                    mensagemEl.style.display = "none";
                }, 500);
            }, 6200);

            // Salva data/hora da visualização
            localStorage.setItem(MENSAGEM_KEY, agora);
        } else {
            mensagemEl.style.display = 'none'; // Oculta imediatamente
        }
    </script>
    <div class="info">
        <div class="photo-profile">
            <img src="/users/45692327000100/CD1/colaborador/ryan/img/profile.jpg">
            <div class="detals">
                <h1>Olá, Ryan!</h1>
                <p>Colaborador</p>
            </div>
        </div>
        <div class="balance">
            <p>Pontos</p>
            <span>3</span>
        </div>
        <div class="border"></div>
        <div class="pending">
            <p>Ticket-Médio</p>
            <span id="ticketRyannDate" class="skeleton shimmer"></span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const url = `https://script.google.com/macros/s/AKfycby8x6--ITfvIW7ui6c24reBqzL3LUhqL30hf4-gaJCS0xB0EDPM50TcSji_W-IuNU33/exec?pagina=3`;

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const campos = [
                        'ticketEvelynDate',
                        'ticketRyannDate'
                    ];

                    campos.forEach(id => {
                        const el = document.getElementById(id);
                        if (el) {
                            el.textContent = data[id];
                            el.classList.remove('skeleton', 'shimmer');
                        }
                    });
                })
                .catch(error => {
                    console.error('Erro ao buscar dados da página 3:', error);
                });
        });
    </script>


    <div class="new_nav">
        <div class="conta-info">
            <p>Eu, Ryan</p>
            <div class="option">
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/push.html">
                        <i class='bx bx-cart-add'></i>
                        <h3>Vender</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/metricas.html">
                        <i class='bxr  bx-bar-chart-square'></i>
                        <h3>Métricas</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/wallet.html">
                        <i class='bxr  bx-credit-card'></i>
                        <h3>Wallet</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/extrato.html">
                        <i class='bx bx-copy-alt'></i>
                        <h3>Extrato</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="#">
                        <i class='bx bxs-lock-alt'></i>
                        <h3>Resultado</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/news/public/index.html">
                        <i class='bx bx-news'></i>
                        <h3>News</h3>
                    </a>
                </div>
            </div>

            <!--
            <div class="banners-advertising">
                <div class="banners-ads">
                    <input type="radio" name="radio-btn" id="radio1">
                    <input type="radio" name="radio-btn" id="radio2">

                    <div class="b-ads first">
                        <a href="#">
                            <img src="/assets/img/banner1.png" alt="ShockNews: seu portal de noticias confiaveis!">
                        </a>
                    </div>
                    <div class="b-ads">
                        <a href="#">
                            <img src="/assets/img/banner2.png" alt="ELETRO: Gerencie seu négocio com a pauma da mão">
                        </a>
                    </div>

                    <div class="navgation-auto">
                        <div class="auto-btn1"></div>
                        <div class="auto-btn2"></div>
                    </div>
                </div>
                <div class="manual-navgation">
                    <label for="radio1" class="manual-btn"></label>
                    <label for="radio2" class="manual-btn"></label>
                </div>
            </div>
            -->
        </div>

        <div class="navigation">
            <ul>
                <li class="list active">
                    <a href="#">
                        <span class="icon">
                            <i class='bx bxs-user'></i>
                        </span>
                        <span class="text">Conta</span>
                    </a>
                </li>

                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/metricas.html">
                        <span class="icon">
                            <i class='bx bxs-circle-three-quarter'></i>
                        </span>
                        <span class="text">Métricas</span>
                    </a>
                </li>

                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/push.html">
                        <span class="icon">
                            <i class='bx bxs-cart-add'></i>
                        </span>
                        <span class="text">Venda</span>
                    </a>
                </li>

                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/extrato.html">
                        <span class="icon">
                            <i class='bx bxs-copy-alt'></i>
                        </span>
                        <span class="text">Extrato</span>
                    </a>
                </li>

                <li class="list">
                    <a href="/login.html">
                        <span class="icon">
                            <i class='bx bxs-log-out'></i>
                        </span>
                        <span class="text">Sair</span>
                    </a>
                </li>
                <div class="indicator color11"></div>
            </ul>
        </div>

        <!-- Link To JS -->
        <script src="/assets/js/loading.js"></script>
</body>

</html>