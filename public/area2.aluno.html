<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trilha Matemática — Mockup</title>

  <!-- Boxicons -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

  <style>
    :root{
      --bg: #f7faf9;
      --card: #ffffff;
      --primary: #16a34a; /* verde principal */
      --muted: #9ca3af;
      --accent-1: #ffb020; /* laranja (fogo) */
      --text: #0f172a;
      --nav-bg: rgba(255,255,255,0.95);
      --glass-shadow: 0 6px 18px rgba(15,23,42,0.08);
    }

    /* Dark theme values */
    body.dark {
      --bg: #0b1220;
      --card: #0f1724;
      --primary: #2dd4bf;
      --muted: #475569;
      --accent-1: #ffb020;
      --text: #e6eef6;
      --nav-bg: rgba(6,8,14,0.85);
      --glass-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }

    html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
    .container{max-width:900px;margin:0 auto;padding:16px 16px 100px;position:relative}

    /* ---------- HEADER ---------- */
    header.app-header{
      display:flex;
      align-items:center;
      gap:12px;
      justify-content:space-between;
      padding:12px;
      border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.06), transparent);
      margin-bottom:12px;
      box-shadow:var(--glass-shadow);
      position:sticky; top:12px; z-index:40;
      backdrop-filter: blur(6px);
    }
    .left {
      display:flex; align-items:center; gap:12px;
    }
    .avatar {
      width:48px; height:48px;
      display:inline-flex; align-items:center; justify-content:center;
      background: #dcfce7; /* verde-claro */
      color:#fff;
      border-radius:10px;
      font-size:22px;
      box-shadow:0 6px 12px rgba(16,185,129,0.12);
    }
    .user-info { display:flex; flex-direction:column; line-height:1; }
    .user-info .nick{ font-weight:700; letter-spacing:0.1px; }
    .user-info .sub{ font-size:12px; color:var(--muted); margin-top:2px; }

    .header-right { display:flex; gap:12px; align-items:center; }
    .metric {
      display:flex; gap:8px; align-items:center; background:var(--card); padding:8px 10px; border-radius:10px; box-shadow:var(--glass-shadow);
      font-weight:700; color:var(--text);
    }
    .metric i { font-size:18px; color:var(--primary); }

    .theme-toggle {
      width:40px;height:40px;border-radius:10px;display:inline-flex;align-items:center;justify-content:center;background:var(--card);box-shadow:var(--glass-shadow);cursor:pointer;
    }

    /* ---------- STREAK (dias) ---------- */
    .streak-row { display:flex; justify-content:center; gap:10px; margin:18px 0; }
    .streak-day {
      width:42px; height:42px; border-radius:50%; background:var(--card); display:flex; align-items:center; justify-content:center; box-shadow:var(--glass-shadow); position:relative; overflow:visible;
      border:1px solid rgba(0,0,0,0.03);
    }
    .streak-day .day-num { font-weight:700; color:var(--muted); font-size:12px; }
    .streak-day.active { background:linear-gradient(180deg,var(--accent-1), #ff8a00); color:white; border-color:transparent; }
    /* animated fire icon inside active day */
    .streak-day .fire {
      display:inline-flex; align-items:center; justify-content:center; width:26px;height:26px;border-radius:50%; background:transparent; position:absolute; top:8px; left:8px; transform-origin:center;
      animation: fire-pulse 1200ms infinite;
    }
    @keyframes fire-pulse {
      0% { transform: translateY(0) scale(1); filter:drop-shadow(0 6px 10px rgba(255,140,0,0.12)); }
      50% { transform: translateY(-3px) scale(1.06); }
      100% { transform: translateY(0) scale(1); }
    }

    /* ---------- TRAIL AREA (SVG) ---------- */
    .trail-wrap { position:relative; width:100%; height:680px; display:block; margin-top:8px; }
    svg.trail-svg { width:100%; height:100%; display:block; overflow:visible; }
    /* hide path stroke if desired but keep for debug */
    svg .trail-path { fill:none; stroke:rgba(99,102,241,0.06); stroke-width:12; stroke-linecap:round; stroke-linejoin:round; filter: drop-shadow(0 6px 20px rgba(16,24,40,0.06)); }

    /* Node containers positioned absolutely on top of SVG (script calculates coords) */
    .node {
      position:absolute;
      width:78px; height:78px; border-radius:50%; display:flex; align-items:center; justify-content:center;
      box-shadow:0 8px 18px rgba(16,24,40,0.08); color:white; font-size:26px; transform: translate(-50%, -50%); cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .node:hover { transform: translate(-50%,-50%) scale(1.04); box-shadow:0 14px 28px rgba(16,24,40,0.12); }

    /* three icon types */
    .node.type-a { background: linear-gradient(180deg,#16a34a,#0ea56b); } /* calculo */
    .node.type-b { background: linear-gradient(180deg,#0ea5e9,#0284c7); } /* gráfico */
    .node.type-c { background: linear-gradient(180deg,#f97316,#ff6b00); } /* livro/exercício */

    .node.locked { filter:grayscale(.4) brightness(.92); opacity:.82; box-shadow:none; cursor:not-allowed; }
    .node.completed { outline:4px solid rgba(255,255,255,0.08); box-shadow:0 6px 18px rgba(0,0,0,0.06) inset; }

    /* small label under node (topic name) */
    .node-label { position:absolute; top:calc(100% + 8px); left:50%; transform:translateX(-50%); font-size:12px; color:var(--muted); white-space:nowrap; }

    /* center area for future mascot */
    .mascot-slot { position:absolute; left:50%; top:50%; transform:translate(-50%,-64%); width:160px; height:160px; border-radius:14px; display:flex; align-items:center; justify-content:center; pointer-events:none; }
    .mascot-placeholder { width:120px; height:120px; border-radius:14px; background: linear-gradient(180deg, rgba(16,185,129,0.08), rgba(16,185,129,0.02)); border:2px dashed rgba(16,185,129,0.12); display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:700; }

    /* ---------- FLOATING NAVBAR ---------- */
    .floating-nav {
      position:fixed; left:50%; transform:translateX(-50%); bottom:18px; width:92%; max-width:760px;
      background:var(--nav-bg); border-radius:18px; padding:10px 18px; display:flex; justify-content:space-around; align-items:center; box-shadow:var(--glass-shadow); z-index:60;
      border:1px solid rgba(0,0,0,0.04);
    }
    .floating-nav a { color:var(--muted); text-decoration:none; font-size:22px; display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:10px; }
    .floating-nav a.active { color:var(--primary); background:rgba(0,0,0,0.02) }

    /* small responsive tweaks */
    @media (max-width:520px){
      .node { width:64px; height:64px; font-size:20px; }
      .mascot-slot { width:120px; height:120px; }
    }
  </style>
</head>
<body>
  <div class="container">

    <header class="app-header" role="banner">
      <div class="left">
        <div class="avatar" aria-hidden="true"><i class='bx bx-user'></i></div>
        <div class="user-info">
          <div class="nick">Gilvan</div>
          <div class="sub">Área de Estudos • Ensino Médio</div>
        </div>
      </div>

      <div class="header-right" role="group" aria-label="Métricas e ações">
        <div class="metric" title="Corações"><i class='bx bx-heart'></i><span>5</span></div>
        <div class="metric" title="Diamantes"><i class='bx bx-cube'></i><span>5.847</span></div>
        <div class="metric" title="Pontos"><i class='bx bx-star'></i><span>120</span></div>

        <div id="themeToggle" class="theme-toggle" title="Alternar tema" role="button" aria-pressed="false">
          <i class='bx bx-sun' id="themeIcon"></i>
        </div>
      </div>
    </header>

    <!-- STREAK row (7 dias) -->
    <div class="streak-row" aria-label="Sequência semanal">
      <!-- JS will toggle class .active -->
      <div class="streak-day" data-day="1"><span class="day-num">1</span></div>
      <div class="streak-day" data-day="2"><span class="day-num">2</span></div>
      <div class="streak-day" data-day="3"><span class="day-num">3</span></div>
      <div class="streak-day" data-day="4"><span class="day-num">4</span></div>
      <div class="streak-day" data-day="5"><span class="day-num">5</span></div>
      <div class="streak-day" data-day="6"><span class="day-num">6</span></div>
      <div class="streak-day" data-day="7"><span class="day-num">7</span></div>
    </div>

    <!-- TRAIL with SVG path -->
    <div class="trail-wrap" id="trailWrap" aria-hidden="false">
      <svg class="trail-svg" viewBox="0 0 900 680" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
        <!-- smooth path that zig-zags vertically to look like a path -->
        <path id="trailPath" class="trail-path"
          d="M100 40
             C 220 20, 340 120, 460 100
             C 580 80, 520 200, 640 220
             C 760 240, 700 360, 620 380
             C 540 400, 480 500, 360 480
             C 240 460, 260 580, 160 600"
        />
      </svg>

      <!-- Node placeholders (positioned by JS relative to SVG path) -->
      <div class="node type-a" id="node1" data-label="Números"><i class='bx bx-calculator'></i><div class="node-label">Números</div></div>
      <div class="node type-b" id="node2" data-label="Frações"><i class='bx bx-pie-chart-alt-2'></i><div class="node-label">Frações</div></div>
      <div class="node type-c" id="node3" data-label="Equações"><i class='bx bx-math'></i><div class="node-label">Equações</div></div>
      <div class="node type-a" id="node4" data-label="Potências"><i class='bx bx-superscript'></i><div class="node-label">Potências</div></div>
      <div class="node type-b" id="node5" data-label="PA e PG"><i class='bx bx-line-chart'></i><div class="node-label">PA e PG</div></div>
      <div class="node type-c" id="node6" data-label="Funções"><i class='bx bx-function'></i><div class="node-label">Funções</div></div>
      <div class="node type-a locked" id="node7" data-label="Probabilidade"><i class='bx bx-dice-5'></i><div class="node-label">Probabilidade</div></div>

      <!-- Mascot slot center -->
      <div class="mascot-slot">
        <div class="mascot-placeholder">MASCOTE</div>
      </div>
    </div>

  </div> <!-- container -->

  <!-- FLOATING NAV -->
  <nav class="floating-nav" role="navigation" aria-label="Navegação principal">
    <a href="#" class="active" aria-current="page"><i class='bx bx-home'></i></a>
    <a href="#"><i class='bx bx-book-open'></i></a>
    <a href="#"><i class='bx bx-bar-chart-alt-2'></i></a>
    <a href="#"><i class='bx bx-user'></i></a>
  </nav>

  <script>
    // ---------- Theme toggle ----------
    const body = document.body;
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');

    function setTheme(isDark){
      if(isDark){
        body.classList.add('dark');
        themeIcon.className = 'bx bx-moon';
        themeToggle.setAttribute('aria-pressed', 'true');
      } else {
        body.classList.remove('dark');
        themeIcon.className = 'bx bx-sun';
        themeToggle.setAttribute('aria-pressed', 'false');
      }
    }

    // remember preference (localStorage)
    const stored = localStorage.getItem('prefersDark');
    setTheme(stored === '1');

    themeToggle.addEventListener('click', () => {
      const nowDark = body.classList.contains('dark');
      setTheme(!nowDark);
      localStorage.setItem('prefersDark', !nowDark ? '1' : '0');
    });

    // ---------- Position nodes along the SVG path ----------
    (function positionNodesAlongPath(){
      const svg = document.querySelector('svg.trail-svg');
      const path = document.getElementById('trailPath');
      const pts = [
        document.getElementById('node1'),
        document.getElementById('node2'),
        document.getElementById('node3'),
        document.getElementById('node4'),
        document.getElementById('node5'),
        document.getElementById('node6'),
        document.getElementById('node7'),
      ];

      // get total length and compute points spaced evenly along the path (use fractions)
      const total = path.getTotalLength();
      // specify percentages along the path for natural progression feel (not perfectly even)
      const fractions = [0.03, 0.16, 0.32, 0.48, 0.62, 0.78, 0.92];

      function place() {
        const bbox = svg.getBoundingClientRect();
        // absolute offset of SVG in page
        const svgLeft = bbox.left + window.scrollX;
        const svgTop = bbox.top + window.scrollY;

        fractions.forEach((f, i) => {
          const len = f * total;
          const pt = path.getPointAtLength(len);
          // compute normalized position inside svg viewBox coords -> convert to pixel by using bbox ratio
          // Because viewBox = 0 0 900 680 (we set), scale factors are:
          const vbWidth = 900, vbHeight = 680;
          const scaleX = bbox.width / vbWidth;
          const scaleY = bbox.height / vbHeight;
          const x = svgLeft + pt.x * scaleX;
          const y = svgTop + pt.y * scaleY;

          const el = pts[i];
          if (!el) return;
          // position node element (absolute)
          el.style.left = x + 'px';
          el.style.top = y + 'px';

          // rotate node slightly to face along path direction (optional)
          // get small delta to compute angle
          const delta = 2;
          const pt2 = path.getPointAtLength(Math.min(total, len + delta));
          const angle = Math.atan2(pt2.y - pt.y, pt2.x - pt.x) * (180/Math.PI);
          el.style.transform = `translate(-50%,-50%) rotate(${angle}deg)`;
          // reset icon rotation inside node
          const icon = el.querySelector('i');
          if(icon) icon.style.transform = `rotate(${ -angle }deg)`;
        });
      }

      // run on load and on resize (debounce)
      place();
      let t;
      window.addEventListener('resize', ()=>{ clearTimeout(t); t = setTimeout(place, 120); });
      window.addEventListener('scroll', ()=>{ clearTimeout(t); t = setTimeout(place, 120); });

      // make nodes focusable/clickable for demo
      pts.forEach((n, idx) => {
        n.addEventListener('click', (e)=>{
          if(n.classList.contains('locked')) {
            // simple feedback for locked
            n.animate([{ transform: 'translate(-50%,-50%) scale(1)' }, { transform: 'translate(-50%,-50%) scale(.92)' }, { transform: 'translate(-50%,-50%) scale(1)' }], { duration: 240 });
            return;
          }
          // toggle completed class for demo
          n.classList.toggle('completed');
          // you can open the lesson modal here
          alert('Abrir tópico: ' + n.dataset.label);
        });
      });

    })();

    // ---------- Demo: mark some streak days as active (insert fire icon) ----------
    (function demoStreak(){
      // Example: user completed days 1 and 2 and 5
      const done = [1,2,5];
      const days = document.querySelectorAll('.streak-day');
      days.forEach(d => {
        const num = Number(d.dataset.day);
        if(done.includes(num)){
          d.classList.add('active');
          // create animated fire icon with day number inside
          const fire = document.createElement('div');
          fire.className = 'fire';
          fire.innerHTML = `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 2c0 0 4 2 4 6 0 4-3 6-4 10-1-4-4-6-4-10 0-4 4-6 4-6z" fill="white"></path>
          </svg><span style="position:absolute;font-size:10px;font-weight:700;left:6px;top:6px;color:#fff">${String(num)}</span>`;
          d.appendChild(fire);
          // hide the numeric background day-num to avoid overlap (optional)
          const dn = d.querySelector('.day-num');
          if(dn) dn.style.opacity = '0';
        }
      });
    })();
  </script>
</body>
</html>
