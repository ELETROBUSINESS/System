<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-9060080612658200">

    <link rel="icon" href="/assets/img/iconWeb.png">
    <title>Conta | Ryan</title>

    <!-- Link To CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <!--
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const auth = JSON.parse(localStorage.getItem("auth"));
            if (!auth) {
                window.location.href = "/index.html";
                return;
            }
            const currentPath = window.location.pathname;
            // CNPJ tem acesso a tudo
            if (auth.username === "45692327000100") return;
            // Garante que o usuário só acesse a própria pasta
            if (!currentPath.includes("/" + auth.username + "/")) {
                alert("Acesso negado. Você não tem permissão para acessar esta página.");
                window.location.href = "/login.html";
            }
        });
    </script>
    -->
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BV6V3GTMR0"></script>
<script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-BV6V3GTMR0'); </script>

<body class="painel-adm1" onload="constDate();">
    <div class="mensagerLocal">
        <div class="mensager">
            <img src="/assets//img/growth.png">
            <div>
                <h1>Ótimo!, <span>262,57%</span>,</h1>
                <p>Você superou sua meta diária. Boas vendas hoje!</p>
            </div>
            <div class="progress-bar"></div> <!-- Barra adicionada aqui -->
        </div>
    </div>
    <script>
        const MENSAGEM_KEY = 'ultimaMensagemEletro';
        const INTERVALO_HORAS = 20;
        const INTERVALO_MS = INTERVALO_HORAS * 60 * 60 * 1000;

        const agora = new Date().getTime();
        const ultimaVisualizacao = localStorage.getItem(MENSAGEM_KEY);

        const mensagemEl = document.querySelector('.mensagerLocal');

        // Se nunca viu ou já passou 20 horas
        if (!ultimaVisualizacao || (agora - parseInt(ultimaVisualizacao)) > INTERVALO_MS) {
            mensagemEl.style.display = 'flex';

            // Começa animação de desaparecimento após 10s
            setTimeout(() => {
                mensagemEl.style.transition = "opacity 0.5s ease";
                mensagemEl.style.opacity = 0;

                setTimeout(() => {
                    mensagemEl.style.display = "none";
                }, 500);
            }, 6200);

            // Salva data/hora da visualização
            localStorage.setItem(MENSAGEM_KEY, agora);
        } else {
            mensagemEl.style.display = 'none'; // Oculta imediatamente
        }
    </script>
    <div class="info">
        <div class="photo-profile">
            <img src="/users/45692327000100/CD1/colaborador/ryan/img/profile.jpg">
            <div class="detals">
                <h1>Olá, Ryan!</h1>
                <p>Colaborador</p>
            </div>
            <i class="fi fi-rr-shield-trust"></i>
        </div>
        <div class="balance">
            <p>Pontos</p>
            <span>3,00</span>
        </div>
        <div class="border"></div>
        <div class="pending">
            <p>Ticket-Médio</p>
            <span id="ticketRyannDate" class="skeleton shimmer"></span>
        </div>
    </div>

    <div class="containerCard">
        <a href="/users/45692327000100/CD1/colaborador/ryan/quest.html">
            <div class="card-optionSize">
                <img src="/assets//img/business-goal.png">
                <div>
                    <h1></h1>
                    <span>Ganhe pontos realizando missões!</span>
                </div>
                <span class="l2"></span>
            </div>
        </a>
    </div>

    <div class="new_nav">
        <div class="conta-info">
            <p>Acessos</p>
            <div class="option">
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/push.html">
                        <i class='bxr  bx-plus-circle'></i>
                        <h3>Registrar</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/quest.html">
                        <i class='bx  bx-radar'></i>
                        <h3>Missão</h3>
                    </a>
                </div>
                <!--
                <div class="card-option">
                    <a href="#">
                        <i class='bx  bx-credit-card-front'  ></i> 
                        <h3>Pagar</h3>
                    </a>
                </div>
                -->
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/metricas.html">
                        <i class='bx  bx-bar-chart-square'></i>
                        <h3>Métricas</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/wallet.html">
                        <i class='bx  bx-user-id-card'></i>
                        <h3>Conta</h3>
                    </a>
                </div>
                <div class="card-option">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/extrato.html">
                        <i class='bx bx-copy-alt'></i>
                        <h3>Extrato</h3>
                    </a>
                </div>
            </div>
        </div>

        <div class="navigation">
            <ul>
                <li class="list active">
                    <a href="#">
                        <span class="icon"><i class='bx  bxs-home'></i></span>
                        <span class="text">Home</span>
                    </a>
                </li>

                <li class="list">
                    <a href="/users/45692327000100/CD1/adm/nb/pdv.html">
                        <span class="icon">
                            <i class='bx  bx-cart-minus'  ></i> 
                        </span>
                        <span class="text">PDV</span>
                    </a>
                </li>
                
                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/quest.html">
                        <span class="icon"><i class='bx  bx-radar'></i></span>
                        <span class="text">Missões</span>
                    </a>
                </li>
                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/push.html">
                        <span class="icon"><i class='bxr  bx-plus-circle'></i></span>
                        <span class="text">Venda</span>
                    </a>
                </li>
                <li class="list">
                    <a href="/users/45692327000100/CD1/colaborador/ryan/extrato.html">
                        <span class="icon"><i class='bx bx-copy-alt'></i></span>
                        <span class="text">Extrato</span>
                    </a>
                </li>
                <li class="list">
                    <a href="#" id="logout-btn">
                        <span class="icon"><i class='bx bx-log-out'></i></span>
                        <span class="text">Sair</span>
                    </a>
                </li>
                <div class="indicator color11"></div>
            </ul>
        </div>

        <script>
            // Seleciona o botão "Sair" que acabamos de modificar
            const logoutButton = document.getElementById('logout-btn');

            // Verifica se o botão realmente existe na página antes de adicionar o evento
            if (logoutButton) {
                // Adiciona um "ouvinte" que espera por um clique no botão
                logoutButton.addEventListener('click', (event) => {
                    // 1. Impede que o link 'href' faça sua ação padrão (que seria navegar para '#')
                    event.preventDefault();

                    console.log("Botão de logout clicado.");

                    // 2. Remove APENAS o token de sessão (acesso) do armazenamento do navegador
                    localStorage.removeItem('session_token');
                    console.log("Token de sessão removido. O token 'Lembrar-me' foi mantido.");

                    // 3. Redireciona o usuário de volta para a página de login
                    //    Ajuste o caminho se o seu arquivo de login tiver outro nome ou local.
                    window.location.href = '/users/e-finance.html';
                });
            }
        </script>

        <!-- Link To JS -->
        <script src="/assets/js/loading.js"></script>
        <script src="/assets/js/mydateUser.js"></script>
</body>

</html>