<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" href="/assets/img/iconWeb.png">
  <title>Crédiario</title>

  <!-- Link To CSS -->
  <link rel="stylesheet" href="/assets/CSS/main.css">
  <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel='stylesheet'
    href='https://cdn-uicons.flaticon.com/3.0.0/uicons-regular-straight/css/uicons-regular-straight.css'>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BV6V3GTMR0"></script>
<script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-BV6V3GTMR0'); </script>

<body class="painel-adm1" onload="AnimationLoading();">
  <header>
    <div class="loading">
      <div class="efect-loading"></div>
    </div>
  </header>
  <div class="info">
    <div class="photo-profile">
      <img src="/users/lapinha/img/profile_photo.jpg">
      <div class="detals">
        <h1>Olá, Lapinha!</h1>
        <p>Administradora</p>
      </div>
      <i class="fi fi-rr-shield-trust"></i>
    </div>
    <div class="pending">
      <p>Vendas a receber</p>
      <span id="valor2-mobile" class="skeleton shimmer"></span>
    </div>
  </div>
  <br>
  <div class="back">
    <a class="btn-default" href="/users/lapinha/conta.html" target="_self">
      Voltar<i class='bx bxs-left-arrow-circle'></i>
    </a>
  </div>

  <div class="new_nav">
    <div class="conta-info">
      <p></p>
      <div class="option">
        <div class="card-option">
          <a href="/users/lapinha/crediario.html">
            <i class='bx  bx-credit-card-insert'></i> 
            <h3>Registrar Carnê</h3>
          </a>
        </div>
        <!--
                                <div class="card-option">
                    <a href="/users/45692327000100/CD1/adm/nb/boletosMarco.html">
                        <i class='bx bx-calendar-event'></i>
                        <h3>Março Boletos</h3>
                    </a>
                </div>
                -->
      </div>

      <p>Carnê Digital</p>
      <div class="shop container">
    <div class="mainContainer">
        <div class="boletosContainer">
            <div class="boletos-vencer" id="boletosContainer"></div>
        </div>
    </div>
</div>
<script>
            // Script para os valores do mobile - Use IDs diferentes para evitar conflito
            document.addEventListener('DOMContentLoaded', () => {
                const url = `https://script.google.com/macros/s/AKfycby8x6--ITfvIW7ui6c24reBqzL3LUhqL30hf4-gaJCS0xB0EDPM50TcSji_W-IuNU33/exec?pagina=4`;

                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        const el1Mobile = document.getElementById('valor1-mobile');
                        const el2Mobile = document.getElementById('valor2-mobile');

                        if (el1Mobile) {
                            el1Mobile.textContent = data.valor1;
                            el1Mobile.classList.remove('skeleton', 'shimmer');
                        }

                        if (el2Mobile) {
                            el2Mobile.textContent = data.valor2;
                            el2Mobile.classList.remove('skeleton', 'shimmer');
                        }
                    })
                    .catch(error => {
                        console.error('Erro ao buscar dados mobile:', error);
                    });
            });
        </script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('boletosContainer');

        // Loader antes do carregamento
        container.innerHTML = `
            <div class="loader">
                <div class="spinner"></div>
            </div>
        `;

        // Certifique-se de que esta URL é a sua URL de implantação do App Script
        const url = "https://script.google.com/macros/s/AKfycbyPWy8SHpOTsZAqFKoUTNOrgJkZKVVtYAMRXNDBQ3Nnalkr2k5c6CrUYtfmSuTQ5rbqhw/exec?tipo=crediario&loja=lapinha";

        fetch(url)
            .then(res => res.json())
            .then(data => {
                container.innerHTML = '';

                data.forEach(item => { // Renomeado de 'boleto' para 'item' para ser mais genérico
                    const div = document.createElement('div');
                    div.classList.add('boleto-item'); // Pode manter ou mudar para algo como 'credito-item'

                    // Formata o valor como moeda
                    const valorFormatado = parseFloat(item.value).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

                    div.innerHTML = `
                        <i class="fi fi-rs-user"></i> <span class="description">${item.description}</span>
                        <span class="value">${valorFormatado}</span>
                    `;

                    container.appendChild(div);
                });
            })
            .catch(err => {
                container.innerHTML = '<p style="text-align:center;color:red;">Erro ao carregar dados.</p>';
                console.error('Erro ao carregar dados:', err);
            });
    });
</script>

  </div>
</body>

</html>

<!-- Link To JS -->
<script src="/assets/js/loading.js"></script>
<script src="/assets/js/recurses.js"></script>
<script src="/assets/js/time.js"></script>